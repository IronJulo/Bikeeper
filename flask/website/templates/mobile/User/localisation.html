{% extends "mobile/base.html" %}




{% block header %}
    <div class="logo">
        <a href="/home/"><img src="{{ url_for('static', filename='mobile/assets/logo_bikeeper_without_text.png') }}"
                              alt="logo BiKeeper">
            <h1>BiKeeper</h1></a>
    </div>

    {% include "components/mobile-sidebar.html" %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='bootstrap/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='mobile/css/User/header-mobile.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='mobile/css/User/overlay.css') }}">
    <link rel="stylesheet" type="text/css"
          href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='mobile/css/User/localisation-mobile.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='mobile/css/map.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin=""/>



    <!-- Use any element to open/show the overlay navigation menu -->
    <nav onclick="openNav()"><img src="{{ url_for('static', filename='mobile/assets/menu.png') }}" alt="logo menu">
    </nav>
{% endblock %}

{% block main %}
    <div class="container">
        <div class="row">
            <div class="col-2">
                <a href="/home">
                    <i class="fa fa-chevron-left"></i>
                </a>
            </div>
            <div class="col-8">Localisation</div>
        </div>
    </div>
    <div class="container-fluid">
        <div id="map">
        </div>
    </div>
{% endblock %}


{% block script %}
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>

    <script type="text/javascript">

        var lat = 48.852969;
        var lon = 2.349903;
        var macarte = null;

        function initMap() {

            var url = window.location.href
            var arr = url.split("/");
            var result = arr[0] + "//" + arr[2]
            var myIcon = L.icon({
                iconUrl: result + "/static/pc/assets/logo_bikeeper_without_text.png",
                iconSize: [40, 40],
                iconAnchor: [25, 50],
                popupAnchor: [-3, -76],
            });

            macarte = L.map('map').setView([lat, lon], 11);
            var marker = L.marker([lat, lon], {
                icon: myIcon
            }).addTo(macarte);

            L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {

                attribution: '',
                minZoom: 1,
                maxZoom: 20
            }).addTo(macarte);
        }

        window.onload = function () {
            initMap();
        };
    </script>

{% endblock %}